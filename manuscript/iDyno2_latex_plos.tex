% Template for PLoS
% Version 3.1 February 2015
%
% To compile to pdf, run:
% latex plos.template
% bibtex plos.template
% latex plos.template
% latex plos.template
% dvipdf plos.template
%
% % % % % % % % % % % % % % % % % % % % % %
%
% -- IMPORTANT NOTE
%
% This template contains comments intended 
% to minimize problems and delays during our production 
% process. Please follow the template instructions
% whenever possible.
%
% % % % % % % % % % % % % % % % % % % % % % % 
%
% Once your paper is accepted for publication, 
% PLEASE REMOVE ALL TRACKED CHANGES in this file and leave only
% the final text of your manuscript.
%
% There are no restrictions on package use within the LaTeX files except that 
% no packages listed in the template may be deleted.
%
% Please do not include colors or graphics in the text.
%
% Please do not create a heading level below \subsection. For 3rd level headings, use \paragraph{}.
%
% % % % % % % % % % % % % % % % % % % % % % %
%
% -- FIGURES AND TABLES
%
% Please include tables/figure captions directly after the paragraph where they are first cited in the text.
%
% DO NOT INCLUDE GRAPHICS IN YOUR MANUSCRIPT
% - Figures should be uploaded separately from your manuscript file. 
% - Figures generated using LaTeX should be extracted and removed from the PDF before submission. 
% - Figures containing multiple panels/subfigures must be combined into one image file before submission.
% For figure citations, please use "Fig." instead of "Figure".
% See http://www.plosone.org/static/figureGuidelines for PLOS figure guidelines.
%
% Tables should be cell-based and may not contain:
% - tabs/spacing/line breaks within cells to alter layout or alignment
% - vertically-merged cells (no tabular environments within tabular environments, do not use \multirow)
% - colors, shading, or graphic objects
% See http://www.plosone.org/static/figureGuidelines#tables for table guidelines.
%
% For tables that exceed the width of the text column, use the adjustwidth environment as illustrated in the example table in text below.
%
% % % % % % % % % % % % % % % % % % % % % % % %
%
% -- EQUATIONS, MATH SYMBOLS, SUBSCRIPTS, AND SUPERSCRIPTS
%
% IMPORTANT
% Below are a few tips to help format your equations and other special characters according to our specifications. For more tips to help reduce the possibility of formatting errors during conversion, please see our LaTeX guidelines at http://www.plosone.org/static/latexGuidelines
%
% Please be sure to include all portions of an equation in the math environment.
%
% Do not include text that is not math in the math environment. For example, CO2 will be CO\textsubscript{2}.
%
% Please add line breaks to long display equations when possible in order to fit size of the column. 
%
% For inline equations, please do not include punctuation (commas, etc) within the math environment unless this is part of the equation.
%
% % % % % % % % % % % % % % % % % % % % % % % % 
%
% Please contact latex@plos.org with any questions.
%
% % % % % % % % % % % % % % % % % % % % % % % %

\documentclass[10pt,letterpaper]{article}
\usepackage[top=0.85in,left=2.75in,footskip=0.75in]{geometry}

% Use adjustwidth environment to exceed column width (see example table in text)
\usepackage{changepage}

% Use Unicode characters when possible
\usepackage[utf8]{inputenc}

% textcomp package and marvosym package for additional characters
\usepackage{textcomp,marvosym}

% fixltx2e package for \textsubscript
\usepackage{fixltx2e}

% amsmath and amssymb packages, useful for mathematical formulas and symbols
\usepackage{amsmath,amssymb}

% cite package, to clean up citations in the main text. Do not remove.
\usepackage{cite}

% Use nameref to cite supporting information files (see Supporting Information section for more info)
\usepackage{nameref,hyperref}

% line numbers
\usepackage[right]{lineno}

% ligatures disabled
\usepackage{microtype}
\DisableLigatures[f]{encoding = *, family = * }

% rotating package for sideways tables
\usepackage{rotating}

% Remove comment for double spacing
%\usepackage{setspace} 
%\doublespacing

% Text layout
\raggedright
\setlength{\parindent}{0.5cm}
\textwidth 5.25in 
\textheight 8.75in

% Bold the 'Figure #' in the caption and separate it from the title/caption with a period
% Captions will be left justified
\usepackage[aboveskip=1pt,labelfont=bf,labelsep=period,justification=raggedright,singlelinecheck=off]{caption}

% Use the PLoS provided BiBTeX style
\bibliographystyle{plos2015}

% Remove brackets from numbering in List of References
\makeatletter
\renewcommand{\@biblabel}[1]{\quad#1.}
\makeatother

% Leave date blank
\date{}

% Header and Footer with logo
\usepackage{lastpage,fancyhdr,graphicx}
\usepackage{epstopdf}
\pagestyle{myheadings}
\pagestyle{fancy}
\fancyhf{}
\lhead{\includegraphics[width=2.0in]{PLOS-submission.eps}}
\rfoot{\thepage/\pageref{LastPage}}
\renewcommand{\footrule}{\hrule height 2pt \vspace{2mm}}
\fancyheadoffset[L]{2.25in}
\fancyfootoffset[L]{2.25in}
\lfoot{\sf PLOS}

%% Include all macros below

\newcommand{\lorem}{{\bf LOREM}}
\newcommand{\ipsum}{{\bf IPSUM}}

%% END MACROS SECTION


\begin{document}
\vspace*{0.35in}

% Title must be 250 characters or less.
% Please capitalize all terms in the title except conjunctions, prepositions, and articles.
\begin{flushleft}
{\Large
\textbf\newline{iDynoMiCS 2: Fully flexible computer modelling platform for microbial ecology}
}
\newline
% Insert author names, affiliations and corresponding author email (do not include titles, positions, or degrees).
\\
Robert J Clegg\textsuperscript{1,2,3,*},
Bastiaan J R Cockx\textsuperscript{4},
Stefan Lang\textsuperscript{5},
Barth F Smets\textsuperscript{4},
Jan-Ulrich Kreft\textsuperscript{1,2,3},
\\
\bigskip
\bf{1} Centre for Computational Biology, University of Birmingham, Edgbaston, Birmingham B12 5TT, United Kingdom
\\
\bf{2} Institute of Microbiology and Infection, University of Birmingham, Edgbaston, Birmingham B12 5TT, United Kingdom
\\
\bf{3} School of Biosciences, University of Birmingham, Edgbaston, Birmingham B12 5TT, United Kingdom
\\
\bf{4} Department of Environmental Engineering, Technical University of Denmark, Bygningstorvet 115, 2800 Kgs. Lyngby, Denmark 
\\
\bf{5} Department of Bioinformatics, Friedrich Schiller University, Ernst-Abbe-Platz 2, 07743 Jena, Germany 
\\
\bigskip

% Insert additional author notes using the symbols described below. Insert symbol callouts after author names as necessary.
% 
% Remove or comment out the author notes below if they aren't used.
%
% Primary Equal Contribution Note
%\Yinyang These authors contributed equally to this work.

% Additional Equal Contribution Note
% Also use this double-dagger symbol for special authorship notes, such as senior authorship.
%\ddag These authors also contributed equally to this work.

% Current address notes
%\textcurrency a Insert current address of first author with an address update
% \textcurrency b Insert current address of second author with an address update
% \textcurrency c Insert current address of third author with an address update

% Deceased author note
%\dag Deceased

% Group/Consortium Author Note
%\textpilcrow Membership list can be found in the Acknowledgments section.

% Use the asterisk to denote corresponding authorship and provide email address in note below.
* r.j.clegg@bham.ac.uk

\end{flushleft}
% Please keep the abstract below 300 words
\section*{Abstract}


The source code is publicly available to download from \url{https://github.com/roughhawkbit/iDynoMiCS-2}.
% TODO transfer ownership of the repository to Jan's account, and make it public

% Please keep the Author Summary between 150 and 200 words
% Use first person. PLOS ONE authors please skip this step. 
% Author Summary not valid for PLOS ONE submissions.   
\section*{Author Summary}
% TODO

\linenumbers

\section*{Introduction}
Individual-based modelling of microbial communities is becoming ever more widespread as software is developed and computational power increases \cite{Ferrer2008}.
Drive for more generic software:
checked by more people, so more reliable \cite{Joppa2013};
easier to compare different model formulations, i.e. structural sensitivity  \cite{Adamson2012}. % should this be 2012 or 2013?
Software based on \cite{Kreft1998, Lardon2011, Storck2014}. 

% Here it is really important to also highlight to advantages over other modeling frameworks out there, also in comparison with iDynoMiCS 1.0.
% Why do we need a new framework, what are it's selling points. We should be specific and go beyond the advantages of individual based models.

% written it in this form now, but maybe we should start by highlighting the benefits of iDynoMiCS 2 instead of starting with the limitations of iDynoMiCS 1
The original iDynoMiCS framework \cite{Lardon2011} has seen a rise in popularity and is now used by many research groups all over the world. Half a decade later, we have initiated a rigorous overhaul of the framework. This is done to address several evident limitations of the original package: Learning how to use iDynoMiCS can be challenging and multiple 3rd party tools are required to properly use the software, simulation protocols are sensitive to typographical errors and difficult to validate, it is not possible to simulate more than a single environment, it is difficult to combine agent types, only spherical agents can be modeled, agents can only interact with a single solute grid cell and it is not possible to evaluate processes at different timescales.

To address these issues the iDynoMiCS 2 framework has been developed. This overhauled version of iDynoMiCS allows the user construct a new and unique model by combining simple building blocks that govern the processes and behavior of the agents and their environment. The user can use the default building blocks or develop own building blocks which are easily to implement because of the modular structure and provided Java interfaces. A graphical user interface has been developed to assist the user with the model construction. This lowers the complexity for new iDynoMiCS users and reduces the changes of creating a protocol with errors.

% TODO incorporate selling points in introduction
%Selling points: 
%- easy to use
%- Highly detailed model setup
%- customization to specific use cases, adjustability 
%- fineness and accuracy
%- (correctness) % this one will need a lot of justification.
%- (computational speed) % also needs justification, this point will probably only hold with a good implementation of concurrent evaluation (on todo list)
% there are other IbMs out there that focus on speed, but to my current knowledge these models are far less extensive than iDynoMiCS 2.0

% You may title this section "Methods" or "Models". 
% "Models" is not a valid title for PLoS ONE authors. However, PLoS ONE
% authors may use "Analysis" 
\section*{Models}
The model description follows the ODD (Overview, Design concepts, Details) protocol \cite{Grimm2006, Grimm2010}. Further details are available in Supporting Information for some parts of the model description.

\subsection*{Purpose}


\subsection*{State variables and scales}


\subsection*{Process overview and scheduling}
Each compartment is self-contained.
No interaction between compartments within a global time-step, all transfers are stored and happen instantly between timesteps.

\subsection*{Design concepts}
The iDynoMiCS 2 structure inherits many concepts from previous packages \cite{Kreft1998, Lardon2011}, but also builds on these.
\paragraph{Emergence}


\paragraph{Modularity}
Aids customisability

\paragraph{Ease of comparison}
Since iDynoMiCs 2 already adopts the hybrid approach to modelling (discrete) cells in (continuous) concentration fields, it is straightforward from a design perspective to instead treat cells as a continuum. This "retrofit" allows easy comparison of the hybrid IbM approach with more traditional population-based approaches \cite{wanner1986}
% TODO Need more citations? Alpkvist & Klapper?
for the same system. Such calibration is already used often,
% TODO Need citation(s) here
but implementing this feature is, to our knowledge, the first time it has been offered \textit{within a single software package}.
% TODO Need to check this claim!

\subsection*{Initialization}

\subsection*{Input}
Native protocol file layout, but (hopefully!) able to read in other formats such as Hucka2003 \cite{Hucka2003} and Cuellar2003 \cite{Cuellar2003}.


\subsection*{Submodels}
\paragraph{?}


% Results and Discussion can be combined.
\section*{Results}
% TODO

% In order to `sell' iDyno 2.0 this section would probably benefit from a set of mini examples showcasing/ demonstrating iDynoMiCS 2.0
% key selling points, we need to justify the claims we make in the introduction and show how easy and usefull iDynoMiCS 2.0 is. 

\subsection*{Case study: agent force functions}

\subsection*{Case study: filamentous organism and multi-grid-cell agents}


\section*{Discussion}
% TODO


\section*{Supporting Information}

% Include only the SI item label in the subsection heading. Use the \nameref{label} command to cite SI items in the text.


\section*{Acknowledgments}
% TODO Need to list funding sources.

\nolinenumbers

%\section*{References}
% Either type in your references using
% \begin{thebibliography}{}
% \bibitem{}
% Text
% \end{thebibliography}
%
% OR
%
% Compile your BiBTeX database using our plos2015.bst
% style file and paste the contents of your .bbl file
% here.

\bibliography{bibliography}

\end{document}

