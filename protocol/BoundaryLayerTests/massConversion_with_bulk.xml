<?xml version="1.0" encoding="UTF-8"?>
<document>
	<simulation name="test_MultigridCONCNS" outputfolder="../results"
		log="DEBUG" comment="this is a file for testing purposes only.">
		<!-- ms -->
		<timer stepSize="0.001" endOfSimulation="200.0" />
		<speciesLib>
			<species name="Consumer">
				<aspect name="pigment" type="PRIMARY" class="String" value="BLUE" />
				<speciesModule name="coccoid" />
			</species>

			<species name="coccoid">
				<aspect name="density" type="PRIMARY" class="Double" value="1.0" />
				<aspect name="surfaces" type="CALCULATED" class="AgentSurfaces" />
				<aspect name="morphology" type="PRIMARY" class="String" value="coccoid" />
				<aspect name="divide" type="EVENT" class="CoccoidDivision"	/>
				<aspect name="updateBody" type="EVENT" class="UpdateBody" />
				<aspect name="volume" type="CALCULATED" class="SimpleVolumeState" 	/>
				<aspect name="radius" type="CALCULATED" class="CoccoidRadius" 		/>
			</species>
		</speciesLib>
		<compartment name="chemostat">
			<shape class="Dimensionless" volume="100.0" />
			<solutes>
				<solute name="hydrogen" concentration="5.0" defaultDiffusivity="3"  />
				<solute name="solute2" concentration="0.0" defaultDiffusivity="3"  />
			</solutes>
			<processManagers>
				<process name="solveChemostat" class="ChemostatSolver" priority="0"
					firstStep="0.0" timerStepSize="0.001">
					<aspect name="soluteNames" type="PRIMARY" class="String[]" value="hydrogen,solute2" />
					<aspect name="tolerance" type="PRIMARY" class="Double" value="1.0e-3" />
					<aspect name="hMax" type="PRIMARY" class="Double" value="1.0e-3" />
					<aspect name="solver" type="PRIMARY" class="String" value="heun" />
				</process>
			</processManagers>
		</compartment>

		<compartment name="biofilm">
			<shape class="Rectangle" resolutionCalculator="MultigridResolution">
				<!-- µm -->
				<dimension name="X" isCyclic="false" targetResolution="1.0" max="16.0"></dimension>
				<dimension name="Y" isCyclic="false" targetResolution="1.0" max="16.0">
					<boundary extreme="0" class="SolidBoundary" />
					<boundary extreme="1" class="BiofilmBoundaryLayer" partnerCompartment="chemostat" layerThickness="10" />
				</dimension>
			</shape>
			<solutes>
				<!-- µM -->
				<solute name="hydrogen" concentration="5.0" defaultDiffusivity="3" />
				<solute name="solute2" concentration="0.0" defaultDiffusivity="3"  />
			</solutes>
			<reactions>
				<reaction name="hydrogenConsumption">
					<expression value="5.0*hydrogen/(3.0+hydrogen)" />
					<stoichiometric component="hydrogen" coefficient="-1.0" />
					<stoichiometric component="solute2" coefficient="1.0" />
				</reaction>
			</reactions>
			<processManagers>
				<!-- ms -->
				<process name="SolveDiffusionSteadyState" class="SolveDiffusionSteadyState" priority="1" firstStep="0.0" timerStepSize="0.001">
					<aspect name="soluteNames" type="PRIMARY" class="String[]" value="hydrogen,solute2" /> 
					<!-- µm^2 ms^-1-->
				</process>
			</processManagers>
		</compartment>
	</simulation>
</document>
